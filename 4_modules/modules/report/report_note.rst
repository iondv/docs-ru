Замечания при проектировании шахты
==================================

Операции "NOT CONTAINS"
-----------------------

При использовании Монго БД операции ``NOT CONTAINS`` работать корректно не будут, так как NOT применяется не к CONTAINS, а к условиям вхождения.

На данный момент изменить это не представляется возможным.

Не настроен сборщик для источника данных
----------------------------------------

Не настроен сборщик для источника данных ``"summaryArea.serviceGrid"``. Кроме самой меты в ``deploy.json`` в ``modules.report.globals`` необходимо прописать следующее:

.. code-block:: json

         "mineBuilders": {
             "khv-svyaz-info": {
               "summaryArea": {
                 "internet": "mineBuilder",
                 "population": "mineBuilder",
                 "internetGrid": "mineBuilder",
                 "station": "mineBuilder",
                 "serviceGrid": "mineBuilder"
               }
             }
           }

Это - привязка сборщиков к источникам данных, чтобы иметь возможность агрегировать из разных БД (и вообще источников). Сейчас пока используется стандартный mineBuilder, использующий локальный датасорс Db.

Нельзя сравнить два поля
------------------------

Если сравниваем два поля между собой с использованием поисковых выражений, то работать не будет. Монго БД не умеет сравнивать два поля между собой.
Например подобные выражения работать не будут:

.. code-block::

   {"attr1": {"$regex": "$attr2", "$options": "i"}}

Фильтры
-------

Для сорсов на основе классов фильтры указываются через кондишнсы.

.. code-block:: json

   "filter": [
               {
                 "property": "typePet",
                 "operation": 0,
                 "value": "statement",
                 "nestedConditions": []
               }
             ]

----
