Переменные
==========

Значение атрибутов
------------------

``$`` - применяется вместе с системным наименованием атрибута и возвращает значение указанного атрибута, т.е. если указать ``$name`` при формировании какого-либо условия для действий над значениями атрибутов, то значение атрибута ``name`` и будет источником для заданного условия.

*Пример применения для вычислямого атрибута*

.. code-block:: js

   {
     "formula": {
           "count": [
               "$projects"
           ]
         }
      ...
   }

В текущем классе есть атрибут типа "Коллекция"  ``projects`` и, согласно формуле, необходимо посчитать колличество значений данного атрибута.

**Результат:** количество объектов атрибута ``projects``.

Текущая дата/время, дата
------------------------

``$$now`` - возвращает текущую дату и время

*Пример применения для фильтра допустимых значений*
в навигации:

.. code-block:: json

   {
         "property": "dateEnd",
         "operation": 5,
         "value": [
           "$$now"
         ],
         "nestedConditions": []
    }

``"dateEnd"`` меньше текущей даты/времени

*Пример применения для вывода значения по умолчанию*
в мете класса:

.. code-block:: js

   ...
   "defaultValue": "$$now",
   ...

``$$today`` - возвращает начало суток текущей даты 
*принцип тот же, только дата без времени*

Синтаксис форматирования дат в формате momentjs
-----------------------------------------------

.. code-block:: text

   'DD.MM.YYYY'

.. code-block:: text

   NB: В драйвере к монгодб поддерживаются только основные возможности формата momentjs

Текущий пользователь
--------------------

``$$uid`` - возвращает текущего пользователя

*Пример применения для фильтра допустимых значений в коллекции:*

.. code-block:: json

   {
     "property": "collectionAttr",
     "operation": 10,
     "nestedConditions": [
        {
           "property": "user",
           "operation": 0,
           "value": ["$$uid"]
        }
     ] 
   }

По ссылке атрибута типа "коллекция" отображаются только те объекты, у которых значение атрибута "user" совпадает со значением текущего пользователя.

----
